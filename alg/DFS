package com.logistica.alg;
import com.logistica.Model.Graph;
import java.util.*;
/**
 * DFS (Depth-First Search) sobre o grafo.
 * Retorna a ordem de visita dos nós a partir de um nó inicial.
 * Útil para:
 * - Verificar conectividade
 * - Explorar componentes
 * - Detecção de ciclos (com adaptação)
 */
public class DFS {
    public static List<Integer> run(Graph g, int start) {
        List<Integer> order = new ArrayList<>();
        if (g == null || !g.getNodeIds().contains(start)) return order;
        Set<Integer> seen = new HashSet<>();
        Deque<Integer> stack = new ArrayDeque<>();
        stack.push(start);
        while (!stack.isEmpty()) {
            int u = stack.pop();
            if (seen.contains(u)) continue;
            seen.add(u);
            order.add(u);
            // Para ordem previsível: empilhar vizinhos em ordem reversa
            List<Integer> neighbors = new ArrayList<>();
            for (var e : g.getAdj(u)) neighbors.add(e.getTo());
            Collections.reverse(neighbors);
            for (int v : neighbors) {
                if (!seen.contains(v)) stack.push(v);
            }
        }
        return order;
    }
}
